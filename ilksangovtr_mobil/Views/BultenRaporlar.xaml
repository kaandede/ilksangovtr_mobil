<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:dx="http://schemas.devexpress.com/maui"
             xmlns:models="clr-namespace:ilksangovtr_mobil.Models"
             xmlns:viewmodels="clr-namespace:ilksangovtr_mobil.ViewModels"
             x:Class="ilksangovtr_mobil.Views.BultenRaporlar"
             x:DataType="viewmodels:BultenRaporlarViewModel"
             Shell.TabBarIsVisible="False"
             BackgroundColor="#fff">

    <Shell.TitleView>
        <Grid ColumnDefinitions="Auto,*" 
        Padding="0,0" 
        BackgroundColor="Transparent">
            <Label Text="Bülten ve Raporlar"
             Grid.Column="0"
             FontSize="16"
             FontFamily="NexaHeavy"
             HorizontalOptions="CenterAndExpand"
             VerticalOptions="CenterAndExpand"/>
        </Grid>
    </Shell.TitleView>

    <dx:TabView HeaderPanelPosition="Top"
                HeaderPanelBackgroundColor="White"
                SelectedItemIndicatorColor="#0D7561"
                SelectedItemIndicatorHeight="3"
                HeaderPanelHeight="60"
                ItemHeaderPadding="20,0"
                VerticalOptions="FillAndExpand">

        <!-- Bültenler Tab -->
        <dx:TabViewItem>
            <dx:TabViewItem.HeaderContent>
                <Label Text="Bültenler"
                       FontFamily="NexaHeavy"
                       FontSize="14"
                       TextColor="#152B27"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </dx:TabViewItem.HeaderContent>

            <ScrollView>
                <CollectionView ItemsSource="{Binding Bultenler}"
                              SelectionMode="Single"
                              SelectionChanged="OnBultenSelected"
                              Margin="0,10">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Bulten">
                            <Border StrokeShape="RoundRectangle 16"
                                    Margin="20,8"
                                    BackgroundColor="White"
                                    Stroke="Transparent">
                                <Border.Shadow>
                                    <Shadow Brush="#10000000"
                                           Offset="0,4"
                                           Radius="12"
                                           Opacity="0.1"/>
                                </Border.Shadow>
                                <Grid ColumnDefinitions="Auto,*,Auto"
                                      Padding="20,16"
                                      ColumnSpacing="16">
                                    <Image Grid.Column="0"
                                           Source="pdf.png"
                                           HeightRequest="25"
                                           WidthRequest="25"/>
                                    <VerticalStackLayout Grid.Column="1"
                                                       Spacing="4">
                                        <Label Text="{Binding Baslik}"
                                               FontFamily="NexaHeavy"
                                               TextColor="#152B27"
                                               FontSize="14"/>
                                        <Label Text="{Binding Tarih}"
                                               FontFamily="NexaLight"
                                               TextColor="#64748B"
                                               FontSize="13"/>
                                    </VerticalStackLayout>
                                    <Image Grid.Column="2"
                                           Source="download_icon.png"
                                           HeightRequest="24"
                                           WidthRequest="24"
                                           Opacity="0.6"/>
                                </Grid>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:BultenRaporlarViewModel}}, 
                                                                  Path=PdfGoruntuleCommand}"
                                                        CommandParameter="{Binding .}"/>
                                </Border.GestureRecognizers>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </ScrollView>
        </dx:TabViewItem>

        <!-- Raporlar Tab -->
        <dx:TabViewItem>
            <dx:TabViewItem.HeaderContent>
                <Label Text="Raporlar"
                       FontFamily="NexaHeavy"
                       FontSize="14"
                       TextColor="#152B27"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </dx:TabViewItem.HeaderContent>

            <ScrollView>
                <CollectionView ItemsSource="{Binding Raporlar}"
                              SelectionMode="Single"
                              SelectionChanged="OnRaporSelected"
                              Margin="0,10">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Rapor">
                            <Border StrokeShape="RoundRectangle 16"
                                    Margin="20,8"
                                    BackgroundColor="White"
                                    Stroke="Transparent">
                                <Border.Shadow>
                                    <Shadow Brush="#10000000"
                                           Offset="0,4"
                                           Radius="12"
                                           Opacity="0.1"/>
                                </Border.Shadow>
                                <Grid ColumnDefinitions="Auto,*,Auto"
                                      Padding="20,16"
                                      ColumnSpacing="14">
                                    <Image Grid.Column="0"
                                           Source="pdf.png"
                                           HeightRequest="25"
                                           WidthRequest="25"/>
                                    <VerticalStackLayout Grid.Column="1"
                                                       Spacing="4">
                                        <Label Text="{Binding Baslik}"
                                               FontFamily="NexaHeavy"
                                               TextColor="#152B27"
                                               FontSize="14"/>
                                        <Label Text="{Binding Aciklama}"
                                               FontFamily="NexaLight"
                                               FontAttributes="Bold"
                                               TextColor="#64748B"
                                               FontSize="14"/>
                                        <Label Text="{Binding Tarih}"
                                               FontFamily="NexaLight"
                                               FontAttributes="Bold"
                                               TextColor="#64748B"
                                               FontSize="12"/>
                                    </VerticalStackLayout>
                                    <Image Grid.Column="2"
                                           Source="download_icon.png"
                                           HeightRequest="24"
                                           WidthRequest="24"
                                           Opacity="0.6"/>
                                </Grid>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:BultenRaporlarViewModel}}, 
                                                                  Path=PdfGoruntuleCommand}"
                                                        CommandParameter="{Binding .}"/>
                                </Border.GestureRecognizers>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </ScrollView>
        </dx:TabViewItem>
    </dx:TabView>
</ContentPage> 