<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ilksangovtr_mobil.Views.SifirAracKampanya"
             xmlns:local="clr-namespace:ilksangovtr_mobil.ViewModels"
             Shell.TabBarIsVisible="False"
             BackgroundColor="#F3F7F6">

    <ContentPage.BindingContext>
        <local:AracKampanyaViewModel/>
    </ContentPage.BindingContext>

    <Shell.TitleView>
        <Grid ColumnDefinitions="Auto,*" 
              Padding="0,0" 
              BackgroundColor="Transparent">
            <Label Text="Sıfır Araç Kampanyaları"
                   Grid.Column="0"
                   FontSize="16"
                   FontFamily="NexaHeavy"
                   HorizontalOptions="CenterAndExpand"
                   VerticalOptions="CenterAndExpand"/>
        </Grid>
    </Shell.TitleView>

    <Grid>
        <RefreshView IsRefreshing="{Binding IsBusy}"
                     Command="{Binding RefreshDataCommand}">
            <CollectionView ItemsSource="{Binding AracKampanyaBilgilerims}"
                          SelectionMode="None"
                          Margin="20">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="0,0,0,15"
                               BackgroundColor="White"
                               CornerRadius="15"
                               HasShadow="True"
                               Padding="15">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type local:SifirAracKampanyaViewModel}}, Path=BasvuruYapCommand}"
                                                    CommandParameter="{Binding .}"/>
                            </Frame.GestureRecognizers>
                            <Grid RowDefinitions="Auto,Auto,Auto,Auto" 
                                  ColumnDefinitions="*,Auto">
                                <Label Text="{Binding ARACKAMP_ADI}"
                                       Grid.ColumnSpan="2"
                                       FontFamily="NexaHeavy"
                                       TextColor="#152B27"
                                       FontSize="18"/>
                                
                                <Label Text="{Binding ARAC_OZELLIKLERI}"
                                       Grid.Row="1"
                                       Grid.Column="0"
                                       FontFamily="NexaLight"
                                       TextColor="#64748B"
                                       FontSize="14"
                                       Margin="0,5"/>
                                
                                <Label Text="{Binding ARAC_FIYATI, StringFormat='{0} TL'}"
                                       Grid.Row="2"
                                       Grid.Column="0"
                                       FontFamily="NexaHeavy"
                                       TextColor="#0D7561"
                                       FontSize="16"
                                       Margin="0,5"/>

                                <Button Text="Başvur"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type local:SifirAracKampanyaViewModel}}, Path=BasvuruYapCommand}"
                                        CommandParameter="{Binding .}"
                                        Grid.Row="3"
                                        Grid.ColumnSpan="2"
                                        BackgroundColor="#0D7561"
                                        TextColor="White"
                                        FontFamily="NexaHeavy"
                                        HeightRequest="40"
                                        CornerRadius="8"
                                        Margin="0,10,0,0"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </RefreshView>

        <ActivityIndicator IsRunning="{Binding IsBusy}"
                          IsVisible="{Binding IsBusy}"
                          HorizontalOptions="Center"
                          VerticalOptions="Center"
                          Color="#0D7561"/>
    </Grid>
</ContentPage> 